jQuery(document).ready(function(a){function e(b,c){if(b.length>0){var d='<div class="ced_iimp_back_btn_wrap"><a id="ced_iimp_back_to_albums">Back</a></div>';d+='<ul id="ced_iimp_fb-album-pics" class="ced_iimp_fb-album-pics ced_iimp_fb-album-edges ced_iimp_album-pics">';for(var e in b)b[e].images.length<=0||(d+='<li class="ced_iimp_fb-album-edge ced_iimp_fb-album-pic" data-id="'+b[e].id+'">',d+='<a class="ced_iimp_album_img_anchor" data-album_name="'+c+'" data-src="'+b[e].images[0].source+'" data-width="'+b[e].images[0].width+'" data-height="'+b[e].images[0].height+'">',d+='<img src="'+b[e].images[0].source+'">',d+="</a>",d+="</li>");d+="</ul>",a(".ced_iimp_fb-albums-content-wrap").html(d).removeClass("ced_iimp_hide");var f=a(document).find(".ced_iimp_fb-album-pics.ced_iimp_fb-album-edges");f.height()>400&&f.addClass("ced_iimp_scrollable")}}function f(b,c){if(b.length>0){var d='<div class="ced_iimp_back_btn_wrap"><a id="ced_iimp_back_to_albums">Back</a></div>';d+='<ul id="ced_iimp_flickr-album-pics" class="ced_iimp_flickr-album-pics ced_iimp_flickr-album-edges ced_iimp_album-pics">';for(var e in b)b[e]<=0||(d+='<li class="ced_iimp_fb-album-edge ced_iimp_fb-album-pic" data-id="'+b[e].id+'">',d+='<a class="ced_iimp_album_img_anchor" data-album_name="'+c+'" data-src="'+b[e].url_o+'" data-width="'+b[e].width_o+'" data-height="'+b[e].height_o+'">',d+='<img src="'+b[e].url_o+'">',d+="</a>",d+="</li>");d+="</ul>",a(".ced_iimp_flickr-albums-content-wrap").html(d).removeClass("ced_iimp_hide");var f=a(document).find(".ced_iimp_flickr-album-pics.ced_iimp_flickr-album-edges");f.height()>400&&f.addClass("ced_iimp_scrollable")}}var b=globals.ajaxUrl,c={},d={};a(document).on("click",".notice-dismiss",function(){a(this).parents(".is-dismissible").remove()}),a("#ced_iimp_save_pixabay").on("click",function(){var c=a("#ced_iimp_pixabay_appid").val(),d=a("#ced_iimp_pixabay_image_type option:selected").val(),e=a("#ced_iimp_pixabay_language option:selected").val(),f=a("#ced_iimp_pixabay_per_page").val(),g=a("#ced_iimp_pixabay_orientation").val(),h=a("#pixabay_attribution_s").is(":checked")?"1":"0";return""===a.trim(c)?void alert("You need to enter your Flickr App ID"):(a(".ced_iimp_loader_wrap,.ced_iimp_spinner").removeClass("ced_iimp_hide"),void a.ajax({url:b,data:{action:"save_pixabay_settings",app_id:c,image_type:d,language:e,per_page:f,orientation:g,attriution:h,wpiim_nonce:globals.wpiimp_nonce},type:"post",success:function(b){a(".ced_iimp_loader_wrap,.ced_iimp_spinner").addClass("ced_iimp_hide");try{b=jQuery.parseJSON(b);var c="";"ok"==b.status?(c+='<div class="updated notice is-dismissible">',c+="<p>"+b.message+"</p>",c+='<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button>',c+="</div>"):(c+='<div class="error notice is-dismissible">',c+="<p>"+b.message+"</p>",c+='<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button>',c+="</div>"),a(".ced_iimp_messages").html(c),window.scrollTo(0,0)}catch(d){console.log(b)}}}))}),a("#ced_iimp_save_flickr").on("click",function(){var c=a("#ced_iimp_flickr_appid").val(),d=a("#ced_iimp_flickr_userid").val(),e=a("#ced_iimp_flickr_license option:selected").val(),f=a("#ced_iimp_flickr_sort option:selected").val(),g=a("#ced_iimp_flickr_per_page").val(),h=a("#ced_iimp_flickr_attribution_s").is(":checked")?"1":"0";return""===a.trim(c)?void alert("You need to enter your Flickr App ID"):(a(".ced_iimp_loader_wrap,.ced_iimp_spinner").removeClass("ced_iimp_hide"),void a.ajax({url:b,data:{action:"save_flickr_settings",app_id:c,userid:d,license:e,order_by:f,per_page:g,attriution:h,wpiim_nonce:globals.wpiimp_nonce},type:"post",success:function(b){a(".ced_iimp_loader_wrap,.ced_iimp_spinner").addClass("ced_iimp_hide");try{b=jQuery.parseJSON(b);var c="";"ok"==b.status?(c+='<div class="updated notice is-dismissible">',c+="<p>"+b.message+"</p>",c+='<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button>',c+="</div>"):(c+='<div class="error notice is-dismissible">',c+="<p>"+b.message+"</p>",c+='<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button>',c+="</div>"),a(".ced_iimp_messages").html(c),window.scrollTo(0,0)}catch(d){console.log(b)}}}))}),a("#ced_iimp_fb_credential_saving").on("click",function(){var c=a("#ced_iimp_fb_app_id").val(),d=a("#ced_iimp_fb_secret_key").val();return""==c||""===c||null==c||null===c?(alert("You need to enter your Facebook App ID!!"),!1):""===a.trim(c)?(alert("You need to enter your Flickr App ID!!"),!1):""==d||""===d||null==d||null===d?(alert("You need to enter your Facebook secret key!!"),!1):""===a.trim(d)?(alert("You need to enter your Facebook secret key!!"),!1):(a(".ced_iimp_loader_wrap,.ced_iimp_spinner").removeClass("ced_iimp_hide"),void a.ajax({url:b,data:{action:"save_fb_settings",appId:c,secretKey:d,wpiim_nonce:globals.wpiimp_nonce},type:"post",success:function(b){a(".ced_iimp_loader_wrap,.ced_iimp_spinner").addClass("ced_iimp_hide");try{var c="";b.success?window.open(b.data.loginUrl,"_blank"):(c+='<div class="error notice is-dismissible">',c+="<p>"+b.data.message+"</p>",c+='<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button>',c+="</div>"),a(".ced_iimp_messages").html(c),window.scrollTo(0,0)}catch(d){console.log(b)}}}))}),a(".ced_iimp_fb-album-node").on("click",function(){var d=a(this),f=d.data("id"),g=d.data("name");return a(".ced_iimp_fb-albums-list-wrap").addClass("ced_iimp_hide"),c.hasOwnProperty(f)?void e(c[f]):(a(".ced_iimp_loader_wrap, .ced_iimp_bar_cloning_loader_wrapper").removeClass("ced_iimp_hide"),void a.ajax({url:b,data:{action:"wpiimp_get_fb_album_pics",albumId:f,wpiim_nonce:globals.wpiimp_nonce},type:"post",success:function(b){a(".ced_iimp_loader_wrap, .ced_iimp_bar_cloning_loader_wrapper").addClass("ced_iimp_hide");try{if(b.success){var d=b.data;c[f]=d,e(d,g)}else{var h="";h+='<div class="error notice is-dismissible">',h+="<p>"+b.data+"</p>",h+='<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button>',h+="</div>",a(".ced_iimp_messages").html(h),a(".ced_iimp_fb-albums-list-wrap").removeClass("ced_iimp_hide")}console.log(b)}catch(i){console.log(b)}}}))}),a(document).on("click","#ced_iimp_back_to_albums",function(){a(".ced_iimp_albums-content-wrap").addClass("ced_iimp_hide"),a(".ced_iimp_albums-list-wrap").removeClass("ced_iimp_hide")}),a(document).on("keyup","#ced_iimp_album-search-input",function(){var b=a(this),c=b.val().toLowerCase();return""==c||null==c?void a(document).find("li.ced_iimp_album-node").show("slow"):(a("li.ced_iimp_album-node").not('[data-name*="'+c+'"]').hide("slow"),void a(document).find('li.ced_iimp_album-node[data-name*="'+c+'"]').show("slow"))}),a(".ced_iimp_flickr-album-node").on("click",function(){var c=a(this),e=c.data("id"),g=c.data("name");return a(".ced_iimp_flickr-albums-list-wrap").addClass("ced_iimp_hide"),d.hasOwnProperty(e)?void f(d[e]):(a(".ced_iimp_loader_wrap, .ced_iimp_bar_cloning_loader_wrapper").removeClass("ced_iimp_hide"),void a.ajax({url:b,data:{action:"wpiimp_get_flickr_album_pics",albumId:e,wpiim_nonce:globals.wpiimp_nonce},type:"post",success:function(b){if(a(".ced_iimp_loader_wrap, .ced_iimp_bar_cloning_loader_wrapper").addClass("ced_iimp_hide"),b.success){var c=b.data.photoset.photo;d[e]=c,f(c,g)}else{var h="";h+='<div class="error notice is-dismissible">',h+="<p>"+b.data+"</p>",h+='<button type="button" class="notice-dismiss"><span class="screen-reader-text">Dismiss this notice.</span></button>',h+="</div>",a(".ced_iimp_messages").html(h),a(".ced_iimp_fb-albums-list-wrap").removeClass("ced_iimp_hide")}}}))}),a(document).on("click",".ced_iimp_album_img_anchor",function(){var b=a(this),c=b.attr("data-src"),d=b.attr("data-album_name"),e=parseInt(b.attr("data-width"))+30,f=parseInt(b.attr("data-height"))+77,g=globals.fb_thckbox_arg;return e>=700?(e=700,a(document).find(".ced_iimp_thickbox-img").addClass("ced_iimp_full-width-img")):a(document).find(".ced_iimp_thickbox-img").hasClass("ced_iimp_full-width-img")&&a(document).find(".ced_iimp_thickbox-img").removeClass("ced_iimp_full-width-img"),f>=450&&(f=450),a(document).find("#ced_iimp_thickbox-content img.ced_iimp_thickbox-img").attr("src",c),a(document).find("#ced_iimp_thickbox-content .ced_iimp_insert_into_media").attr("data-src",c),tb_show("Images shown from "+d+" album.",g),a(document).find("#ced_iimp_thickbox-content").parents("#TB_window").css({width:e+"px",height:f+"px",left:"0",margin:"0 auto",position:"absolute",right:"0",top:"50%",transform:"translateY(-50%)"}),a(document).find("#ced_iimp_thickbox-content").parent("#TB_ajaxContent").css({width:e+"px",height:f+"px"}),!1}),a(document).on("click",".ced_iimp_insert_into_media",function(){var c=a(this).attr("data-src");return""==c||"undefined"==typeof c?!1:(tb_remove(),a(".ced_iimp_loader_wrap,.ced_iimp_spinner").removeClass("ced_iimp_hide"),void a.ajax({url:b,data:{action:"wpiimp_save_img_to_media_library",src:c,wpiim_nonce:globals.wpiimp_nonce},type:"post",success:function(b){a(".ced_iimp_loader_wrap,.ced_iimp_spinner").addClass("ced_iimp_hide");try{if(b.success){var c="";c+='<div class="updated notice is-dismissible">',c+="<p>"+b.data.message+"</p>",c+='<button type="button" class="notice-dismiss">',c+='<span class="screen-reader-text">Dismiss this notice.</span>',c+="</button>",c+="</div>",a(".ced_iimp_messages").html(c)}else{var c="";c+='<div class="error notice is-dismissible">',c+="<p>"+b.data+"</p>",c+='<button type="button" class="notice-dismiss">',c+='<span class="screen-reader-text">Dismiss this notice.</span>',c+="</button>",c+="</div>",a(".ced_iimp_messages").html(c)}}catch(d){console.log(b)}}}))})});